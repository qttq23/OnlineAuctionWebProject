

<!-- product details card -->
<div class="card mb-2" id="productDetailsCard">
	<div class="card-header">
		Product details
	</div>
	<div class="card-body">
		<div class="card mb-3" style="border: none;">
			<div class="row no-gutters">
				<div class="col-md-8 ">

					<!-- list of images -->
					<div id="productImgContainer" class="carousel slide mr-3 mb-2" data-ride="carousel">

						<!-- Indicators -->
						<ul id = "productImgIndicator" class=" carousel-indicators">

						</ul>

						<!-- The slideshow -->
						<div id="productImgSlider" class=" carousel-inner ">

						</div>

						<!-- Left and right controls -->
						<a class="carousel-control-prev" href="#productImgContainer" data-slide="prev">
							<span class="carousel-control-prev-icon"></span>
						</a>
						<a class="carousel-control-next" href="#productImgContainer" data-slide="next">
							<span class="carousel-control-next-icon"></span>
						</a>

					</div>

					<!-- list of buttons -->
					<div class="buttons">


						<button class="bidBtn btn btn-primary" onclick="bid()"><i class="fas fa-dollar-sign"></i> Bid</button>

						<button class="addWatchListBtn btn btn-light" title="Add to watch list" onclick="addToWatchList(this)" value="0"><i class="fas fa-heart"></i> Like</button>

						<button class="historyBtn btn btn-light" onclick="viewHistory()"><i class="fas fa-history"></i> History</button>

						<button class="blockBidderBtn btn btn-light" onclick="blockBidder()" title="Block bidder"><i class="fas fa-ban"></i> <i class="far fa-user"></i></button>
					</div>

				</div>

				<div class="col-md-4">
					<div class="card" style="border: none;">
						<h5 class="card-title">{{this.product.Name}}</h5>

						<p class="card-text">
							<dl class="row">

								<dt class="col-sm-6">
									<i class="fas fa-dollar-sign"></i> Current price
								</dt>
								<dd class="col-sm-6 text-sm-right">{{cashConvert this.product.Max_Price}}</dd>

								<dt class="col-sm-6">
									<i class="fas fa-shopping-cart"></i> Instant buy
								</dt>
								<dd class="col-sm-6 text-sm-right">
									{{#if this.product.EndPrice}}
									{{cashConvert this.product.EndPrice}}
									{{else}}
									<i class="fas fa-ban" title="Not set"></i>
									{{/if}}
								</dd>

								<dt class="col-sm-4">
									<i class="fas fa-gavel"></i> Seller	
								</dt>
								<dd class="col-sm-8 text-sm-right">
									{{this.product.OwnerName}}, {{ratePointConvert this.product.OwnerPoint}}
								</dd>



								<dt class="col-sm-5">
									<i class="far fa-user"></i> Bidder
								</dt>
								<dd class="col-sm-7 text-sm-right">
									{{this.product.BidderName}}, {{ratePointConvert this.product.BidderPoint}}
								</dd>

								<dt class="col-sm-5">
									<i class="fas fa-play"></i> Start
								</dt>

								<dd class="col-sm-7 text-sm-right" >
									{{dmyConvert this.product.StartTime}}
								</dd>

								<dt class="col-sm-5">
									<i class="fas fa-hourglass-end"></i> Finish
								</dt>		

								<dd class="col-sm-7 text-sm-right">
									{{relativeDateTimeConvert this.product.EndTime}}
								</dd>



								<dt class="col-sm-12">
									<i class="fas fa-paperclip"></i> Description
									<button class="btn btn-light" title="Add description" onclick="addDescription()"><i class="fas fa-plus"></i></button>
								</dt>
								<dd class="productDescription col-sm-12">
									This is description.This is description.This is description.This is description.This is description.
								</dd>
							</dl>
						</p>

						<p class="card-text"><small class="text-muted">Last updated 3 mins ago</small>
						</p>					
					</div>
				</div>


			</div>
		</div>

	</div>
</div>

<!-- related products list -->
<div class="card">
	<div class="card-header">
		5 related products
	</div>

	<div class="container-fluid mt-3">

		<div class="relatedProductContainer row flex-nowrap overflow-hidden" id="nearEndProDiv">
			{{#each this.relatedList}}
			<div class="col col-sm-4 mt-2 mb-2">
				<div class="item card h-100" id="item{{Id}}">

					<a href="/product/details?id={{Id}}" title="go to product details">
						<img class="card-img-top  img-fluid"
						src="/images/products/67/1.jpg" alt="Image of product {{Name}}">
					</a>

					<div class="card-body">

						<a class="linkToItemDetails" href="/product/details?id={{Id}}" title="go to product details">
							<h5 class="card-title">{{Name}}</h5>
						</a>

						<dl class="row">

							<dd class="col-sm-8" title="Price to win instantly">
								<i class="fas fa-shopping-cart"></i> Win price
							</dd>
							<dd class="col-sm-4 text-sm-right" title="Price to win instantly">
								{{#if EndPrice}}
								{{cashConvert EndPrice}}
								{{else}}
								<i class="fas fa-ban" title="Not set"></i>
								{{/if}}
							</dd>

							<dd class="col-12 d-flex flex-row justify-content-between" title="The highest price paying bidder">

								<span class="text-wrap text-left">
									<i class="far fa-user"></i> {{BidderName}}
								</span>
								<span class="text-wrap text-right">{{cashConvert Max_Price}}</span>
							</dd>



							<dd class="col-12 d-flex flex-row justify-content-between">

								<span class="badge badge-secondary text-wrap" title="The date product was uploaded">
									<i class="fas fa-play"></i> {{dmyConvert StartTime}}
								</span>
								<span class="badge badge-primary text-sm-right text-wrap" title="Time left">
									<i class="fas fa-hourglass-start"></i> {{relativeDateTimeConvert EndTime}}
								</span>
							</dd>



							<dd class="col">
								<div class="badge badge-light badge-lg" title="Number of turns made">
									{{Turn}} turns
								</div>
							</dd>
						</dl>


					</div>

					<!-- list of buttons -->
					<div class="buttons">
						<button class="addWatchListBtn btn btn-light" title="Add to watch list" onclick="addToWatchList(this)" value="0"><i class="fas fa-heart"></i>
						</button>


					</div>


				</div> 
			</div>

			{{/each}}
		</div>
	</div>
</div>


{{#section 'js'}}
<!-- product images -->
<script type="text/javascript">
	const imgNum = 4;
	const imgList = [`{{this.product.ImageFolder}}/{{this.product.Id}}/1.jpg`,
	`{{this.product.ImageFolder}}/{{this.product.Id}}/2.jpg`,
	`{{this.product.ImageFolder}}/{{this.product.Id}}/3.jpg`,
	`{{this.product.ImageFolder}}/{{this.product.Id}}/4.jpg`];

	$(()=>{

		var imgIndicatorHtml = '';
		var imgSliderHtml = '';
		for(var i=0; i < imgNum; i++){
			let temp = i + 1;
			if(temp == 1){
				imgIndicatorHtml += 
				`<li data-target="#productImgContainer" data-slide-to="${temp}" class="active"></li>`;

				imgSliderHtml +=
				`<div class="carousel-item active">
				<img class="img-fluid" src="${imgList[i]}" alt="" style="height: 400px">
				</div>`;
			}
			else{

				imgIndicatorHtml += 
				`<li data-target="#productImgContainer" data-slide-to="${temp}"></li>`;

				imgSliderHtml +=
				`<div class="carousel-item ">
				<img class="img-fluid" src="${imgList[i]}" alt="" style="height: 400px">
				</div>`;
			}

		}
		$('#productImgIndicator').html(imgIndicatorHtml);
		$('#productImgSlider').html(imgSliderHtml);
	});
</script>


<!-- show/hide scroll bar -->
<script type="text/javascript">
	$(()=>{

		// pc mouse enter
		$('.relatedProductContainer').mouseover(function(){
			$(this).removeClass('overflow-hidden');
			$(this).addClass('overflow-auto');

		});

		// mobile mouse enter
		$('.relatedProductContainer').on('touchmove', function(ev) {
			$(this).removeClass('overflow-hidden');
			$(this).addClass('overflow-auto');
		});

		// pc mouse out
		$('.relatedProductContainer').mouseout(function(){
			$(this).removeClass('overflow-auto');
			$(this).addClass('overflow-hidden');

		});

		// mobile mouse out
		$('.relatedProductContainer').on('touchend', function(ev) {
			$(this).removeClass('overflow-hidden');
			$(this).addClass('overflow-auto');
		});
	})
</script>


{{/section}}